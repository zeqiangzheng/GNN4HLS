import os
import sys
import shutil

#directory = sys.argv[1:]

directory = "autogenerated_50000_50999"

folders = [x for x in os.listdir(directory)
           if ( os.path.isdir(directory + "/" + x) and x != "error") ]

all_hls_csv = open(directory + "/HLS_report.csv", "w")
all_rtl_csv = open(directory + "/RTL_report.csv", "w")

bench_set = set()

j = 0
for i in range(len(folders)):
    folder = directory + "/" + folders[i]
    try:
        hls_csv = open(folder + "/HLS_report.csv", "r")
    except:
        continue
    rtl_csv = open(folder + "/RTL_report.csv", "r")
    hls_0 = hls_csv.readline()
    rtl_0 = rtl_csv.readline()
    print("\nFolder ", folder)
    if i == 0: # first folder: keep the first line
        all_hls_csv.write(hls_0)
        all_rtl_csv.write(rtl_0)

    hls_k = hls_csv.readline()
    rtl_k = rtl_csv.readline()
    bench_name = hls_k.split(",")[0] # same IDs as rtl_k
    if bench_name not in bench_set:
        print("Benchmark", j, ":", bench_name)
        j += 1
        bench_set.add(bench_name)
        all_hls_csv.write(hls_k)
        all_rtl_csv.write(rtl_k)

    hls_csv.close()
    rtl_csv.close()

all_hls_csv.close()
all_rtl_csv.close()
    
    
    
